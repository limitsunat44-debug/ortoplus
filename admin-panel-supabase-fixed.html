<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - OrtosalonTj</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <div class="admin-container">
        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div id="adminLogin" class="login-container">
            <div class="logo">
                <h1>üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                <p>OrtosalonTj - –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</p>
            </div>

            <div class="login-form">
                <div class="form-group">
                    <label>–õ–æ–≥–∏–Ω:</label>
                    <input type="text" id="adminUsername" placeholder="admin" class="input-field">
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="adminPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="input-field">
                </div>

                <div id="loginError" class="error-message"></div>

                <button onclick="adminLogin()" class="btn-primary">
                    –í–æ–π—Ç–∏
                </button>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div id="adminDashboard" class="dashboard" style="display: none;">
            <!-- –®–∞–ø–∫–∞ -->
            <div class="dashboard-header">
                <h1>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
                <div class="header-actions">
                    <span class="admin-name">üë§ <span id="currentAdmin"></span></span>
                    <button onclick="adminLogout()" class="btn-logout">–í—ã–π—Ç–∏</button>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-container">
                <div class="stat-card">
                    <h3>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div class="stat-value" id="totalUsers">0</div>
                </div>
                <div class="stat-card">
                    <h3>–° –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏</h3>
                    <div class="stat-value" id="usersWithNames">0</div>
                </div>
                <div class="stat-card">
                    <h3>–ù–æ–≤—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
                    <div class="stat-value" id="recentUsers">0</div>
                </div>
            </div>

            <!-- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã -->
            <div class="tools-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É, –∏–º–µ–Ω–∏ –∏–ª–∏ —à—Ç—Ä–∏—Ö–∫–æ–¥—É..." 
                           onkeyup="searchUsers()" class="search-input">
                </div>
                <div class="action-buttons">
                    <button onclick="syncWithCloud()" class="btn-sync">
                        üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    <button onclick="exportToCSV()" class="btn-export">
                        üì• –≠–∫—Å–ø–æ—Ä—Ç CSV
                    </button>
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
            <div class="table-container">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                            <th>–ò–º—è</th>
                            <th>–®—Ç—Ä–∏—Ö–∫–æ–¥</th>
                            <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                            <th>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </tbody>
                </table>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ -->
            <div class="sync-info">
                <p>
                    ‚ÑπÔ∏è –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Supabase –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
                    –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
                </p>
            </div>
        </div>
    </div>

    <!-- –í–ê–ñ–ù–û: Supabase JS Client –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω –î–û admin-script.js -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- –í–∞—à —Å–∫—Ä–∏–ø—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ -->
    <script src="admin-script-supabase.js"></script>
</body>
</html>