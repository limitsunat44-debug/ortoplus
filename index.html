<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ OrtoPlus</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- –§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
        <div id="authForm" class="auth-section">
            <div class="auth-header">
                <div class="back-btn">‚Üê</div>
                <h1>–í—Ö–æ–¥</h1>
                <div class="menu-btn">‚ãØ</div>
            </div>

            <!-- –®–∞–≥ 1: –í–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
            <div id="phoneStep" class="auth-step active">
                <div class="auth-content">
                    <div class="auth-icon">üë§</div>
                    <h2>–í—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
                    <p class="auth-subtitle">–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</p>

                    <div class="input-group">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <div class="phone-input-wrapper">
                            <select id="countryCode" class="country-code">
                                <option value="+992">üáπüáØ +992</option>
                                <option value="+7">üá∑üá∫ +7</option>
                                <option value="+998">üá∫üáø +998</option>
                            </select>
                            <input type="tel" id="phoneNumber" placeholder="00 000 00 00" maxlength="9">
                        </div>
                    </div>

                    <div id="phoneError" class="error-message"></div>

                    <button onclick="sendVerificationCode()" class="btn-primary">
                        –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥
                    </button>
                </div>
            </div>

            <!-- –®–∞–≥ 2: –í–≤–æ–¥ –∫–æ–¥–∞ -->
            <div id="codeStep" class="auth-step">
                <div class="auth-content">
                    <div class="auth-icon">üîê</div>
                    <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
                    <p id="sentToNumber" class="auth-subtitle"></p>

                    <div class="input-group">
                        <label>–ö–æ–¥ –∏–∑ SMS</label>
                        <input type="text" id="verificationCode" placeholder="000000" maxlength="6" class="code-input">
                    </div>

                    <div id="codeError" class="error-message"></div>

                    <button onclick="verifyCode()" class="btn-primary">
                        –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                    </button>

                    <button onclick="showStep('phoneStep')" class="btn-link">
                        –ò–∑–º–µ–Ω–∏—Ç—å –Ω–æ–º–µ—Ä
                    </button>
                </div>
            </div>
        </div>

        <!-- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç -->
        <div id="userDashboard" class="dashboard hidden">
            <!-- –•–µ–¥–µ—Ä -->
            <div class="dashboard-header">
                <div class="header-left">
                    <div class="back-btn">‚Üê</div>
                    <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
                </div>
                <div class="menu-btn">‚ãØ</div>
            </div>

            <!-- –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ -->
            <div class="virtual-card">
                <div class="card-gradient">
                    <div class="card-pattern"></div>
                    <div class="card-content">
                        <div class="card-header">
                            <div class="card-logo">üëë</div>
                            <div class="card-chip">üí≥</div>
                        </div>

                        <div class="card-info">
                            <div class="card-number" id="cardNumber">0000 0000 0000 0000</div>
                            <div class="card-holder">
                                <div class="card-holder-label">–í–∞—à–µ –ò–º—è</div>
                                <div class="card-holder-name" id="cardHolderName">Lorem Name</div>
                            </div>
                            <div class="card-date">
                                <span class="card-date-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</span>
                                <span id="cardDate">05 / 20</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ -->
            <div class="balance-section">
                <div class="balance-card">
                    <div class="balance-icon">üí∞</div>
                    <div class="balance-info">
                        <div class="balance-label">–í–∞—à–∞ —Å–∫–∏–¥–∫–∞</div>
                        <div class="balance-amount">-10%</div>
                    </div>
                    <button class="balance-btn">‚Üí</button>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è —Å–æ —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–º -->
            <div class="barcode-section">
                <h3 class="section-title">–í–∞—à–∞ –∫–∞—Ä—Ç–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</h3>
                <p class="section-subtitle">–ü–æ–∫–∞–∂–∏—Ç–µ –µ—ë –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∫–∏–¥–∫–∏</p>

                <div class="barcode-wrapper">
                    <div class="barcode-container">
                        <svg id="barcodeDisplay"></svg>
                    </div>
                    <div class="barcode-number" id="barcodeNumber"></div>
                </div>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div class="profile-section">
                <h3 class="section-title">üë§ –ü—Ä–æ—Ñ–∏–ª—å</h3>

                <div class="profile-info">
                    <div class="info-row">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                        <input type="tel" id="userPhone" readonly>
                    </div>
                    <div class="info-row">
                        <label>–ò–º—è:</label>
                        <input type="text" id="userName" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
                    </div>
                </div>

                <button onclick="saveProfile()" class="btn-primary">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                </button>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
            <button onclick="logout()" class="btn-logout">
                –í—ã–π—Ç–∏
            </button>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app-modern-fixed.js"></script>
</body>
</html>